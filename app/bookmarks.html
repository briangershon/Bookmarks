<!DOCTYPE html>
<html>
<head>
  <title>Raging Flame: A hecker's bookmarks</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="description" content="A 100% Javascript cloud personal bookmarking service">
  <meta name="keywords" content="bookmark service, bookmarks, javascript bookmarks">
  <link rel="shortcut icon" href="images/favicon.ico" />
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <link rel="stylesheet" type="text/css" href="fancybox/jquery.fancybox-1.3.4.css" media="screen" />
  <!--[if IE]>
    <style type="text/css">	
	  .gray {
	     width: 120px;
	  }
    </style>
  <![endif]--> 
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-11789217-15']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' === document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>	
<body>
<div id="container">
    <a href="https://github.com/qawemlilo/Bookmarks" target="_blank" style="position: absolute; top:0; right: 0;" onclick="_gaq.push(['_trackEvent', 'Fork', 'Clicked']); return true;"><img src="images/fork.png" /></a>
	<g:plusone size="standard" count="true"></g:plusone>
    <h1>
      <a href="http://apps.rflab.co.za/hackerbookmarks/" title="A Hacker's bookmarks" onclick="_gaq.push(['_trackEvent', 'navigationLinks', 'Logo', this.href]); return true">A Hacker's bookmarks</a>
    </h1>
	
    <div id="about">
      <p style="margin-top: 20px;">Carry your bookmarks whereever you go.</p>
    </div>

	<div id="formDiv">
      <form action="" method="POST"> 
        <fieldset>
            <div style="width: 0 auto; padding:0px; margin-bottom: 5px;">
              <label for="email" style="width:60px; text-align: left">
			    Email
			  </label>
			  <input onclick="this.value='';" name="email" id="email" class="txt"  style="padding:6px 0px 6px 0px" type="text"> <input value="View boomarks" style="padding:5px" id="view" name="view" type="submit" class="button gray" /> 
			</div>
        </fieldset>	
      </form> 
    </div> 
    
	<div id="footer">
	  <a href="bookmarks.html" onclick="_gaq.push(['_trackEvent', 'navigationLinks', 'bookmarks', this.href]); return true;">My bookmarks</a> | <a target="_blank" href="http://www.rflab.co.za/plugins/hacker-bookmarks.html#comment-215820461" onclick="_gaq.push(['_trackEvent', 'navigationLinks', 'Comments', this.href]); return true">Comments</a> |  <a href="mailto:qawemlilo@gmail.com" onclick="_gaq.push(['_trackEvent', 'navigationLinks', 'Contact', this.href]); return true">Contact Us</a> | <a href="http://sam.zoy.org/wtfpl/" target="_blank" onclick="_gaq.push(['_trackEvent', 'navigationLinks', 'Licence', this.href]); return true;">Licence</a> <br />&copy; 2011 <a href="http://www.rflab.co.za/" onclick="_gaq.push(['_trackEvent', 'navigationLinks', 'Home', this.href]); return true">Raging Flame</a> | <a href="http://twitter.com/ragingflameblog" target="_blank" onclick="_gaq.push(['_trackEvent', 'navigationLinks', 'twitter', this.href]); return true">@ragingflameblog</a>
    </div>
</div>

<script type="text/javascript">
var include_js = function (url, callback) { 
    var script = document.createElement("script");
    script.type = "text/javascript";
	
    if (script.readyState && callback) {  //IE
        script.onreadystatechange = function(){
            if (script.readyState === "loaded" || script.readyState === "complete"){
                script.onreadystatechange = null;
                callback();
            }
        };
    } else if (callback) {  
        script.onload = function(){
            callback();
        };
    }
    script.src = url;
    document.getElementsByTagName("head")[0].appendChild(script);
},

isEmail = function (email) { 
    var rgEx = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return !!email.match(rgEx);
},


isUrl = function (url) {
    var url_match = /https?:\/\/([-\w\.]+)+(:\d+)?(\/([\w/_\.]*(\?\S+)?)?)?/;
    return url_match.test(url);
},
 
createLinks = function (formurl, csvurl) {
		
		if (!isUrl(formurl) || !isUrl(csvurl)) {
		    displayMSG("All fields require valid input!"); 
            return;			
		}

        txt =  "<a class=\"bookmarkButton\" href=\"javascript:(function(){if(typeof googleFormActionUrl_367342iurw34!=='undefined') return;var jsScript=document.createElement('script');window.googleFormActionUrl_367342iurw34='"+formurl+"';jsScript.setAttribute('type','text/javascript'); jsScript.setAttribute('src', 'http://www.rflab.co.za/scripts/add_bookmarks_min.js');document.getElementsByTagName('head')[0].appendChild(jsScript);})();\">Bookmarks this!</a>";
		
        txt += "<a class=\"bookmarkButton\" href=\"javascript:(function(){if(typeof HACKER_BOOKMARKS === 'object' && document.getElementById('hacker_bookmark_panel')) return; if(typeof HACKER_BOOKMARKS === 'object' && !document.getElementById('hacker_bookmark_panel')){ghshu_897742(); return;} window.googledocUrl_367342iurw34='"+csvurl+"'; var jsScript=document.createElement('script'); jsScript.setAttribute('type','text/javascript'); jsScript.setAttribute('src','http://www.rflab.co.za/scripts/view_bookmarks_min.js');document.getElementsByTagName('head')[0].appendChild(jsScript) || document.body.appendChild(jsScript);})();\">View Bookmarks</a>";
	
		if ($.browser.msie) txt += "Right-click on these buttons and select Add to Favorites";
        else txt += "Drag these buttons to your bookmarks bar"; 

        txt += '<a style="margin-left: 40px; color: #fff; font-size: 20px;" href="" onclick="$(\'#appMsg\').remove(); return false;">[x]</a>';

        lbox = $('<div>', {
            id : 'appMsg',
	        html : txt  
        });
		
        lbox.hide().appendTo('body');
	    $('#appMsg').slideDown();
},

callBack = function(yql) {
    if (!yql.query.count) {
        displayMSG('No results where found!');
        return false;
    }
    
	var data = yql.query.results.row;
    createLinks(data.formurl, data.csvurl);
},
displayMSG = function (a,b) {
      var c = $("<div>",{id:"appMsg",html:a});
	
	  c.click(function () {
	      $(this).fadeOut(function () {
		      $(this).remove()
		  })
	  });
	
	  b ? setTimeout(function(){c.click()},b) : setTimeout(function(){c.click()},5000);
	  c.hide().appendTo("body").slideDown()
};
  
window.onload = function() {
    include_js("http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js", function (){
        window.setTimeout(function(){
	        displayMSG("Type in your email address to retrieve saved bookmarks", 10000);
        }, 3000);			
        $('#view').click(function(e) {

			e.preventDefault();
			
		    var email = $('#email').val(), restQuery, query, yqlQuery;
			
	        if (!isEmail(email) || !email) {
                displayMSG('Invalid Email!');
                return false;
            }
			
            restQuery = 'http://query.yahooapis.com/v1/public/yql?q=',
			query = 'select * from csv where url="https://spreadsheets.google.com/spreadsheet/pub?hl=en_US&hl=en_US&key=0AqJ6uSJSd-kSdHhvb01UczUxeWI5dFFyX2Q1TTJuVnc&output=csv" and columns="time,email,formurl,csvurl" and email="'+ email +'"', 
            yqlQuery = restQuery + encodeURIComponent(query)  + '&format=json&callback=callBack'; 
            include_js(yqlQuery);  			
	    })		
    });
};
   </script> 
  <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
  </body>
</html>